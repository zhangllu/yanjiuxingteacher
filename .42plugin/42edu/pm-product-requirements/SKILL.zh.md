---
name: product-requirements
description: This skill should be used when writing product requirement documents (PRD) based on affordance theory. It helps define environmental affordances, identify action possibilities, specify interaction design, and establish perception-action coupling.
depends:
  - real.md
  - cog.md
generates:
  - spec-product-requirements.md
---

# 产品需求（可供性驱动）

## 概述

本技能将产品想法转化为**以可供性为中心**的综合需求文档——即环境（产品）为智能体（用户）提供的行动可能性。我们不再关注抽象的功能特性，而是定义**产品环境邀请、支持和约束哪些行动**。

> **核心理念**：在AI时代，产品是提供特定行动可能性的环境。优秀的产品让可供性对人类和AI智能体而言都是**可感知的、可学习的、可利用的**。

> **AI智能体注意事项**：生成的规约文档专为AI智能体（尤其是Claude Code）设计，以确保产品实现与清晰的可供性结构保持一致。

## 前置条件

使用本技能前，请确保以下基础文档已存在：

1. **real.md** - 现实约束文档
2. **cog.md** - 认知模型文档

如果这些文档不存在，请先调用 **00-meta** 技能生成它们。

### 执行前检查清单

```
[ ] real.md 存在于项目根目录或 .42cog 目录中
[ ] cog.md 存在于项目根目录或 .42cog 目录中
[ ] 已读取 real.md 以理解环境约束
[ ] 已读取 cog.md 以理解智能体及其能力
```

### 上下文加载

从 **cog.md** 中提取：
- **智能体**（人类和AI）及其行动能力
- **目标**和典型行动序列
- **感知系统**（智能体能感知什么）

从 **real.md** 中提取：
- **物理约束**，限制可能的行动
- **环境不变量**，塑造可供性
- **安全边界**，约束行动空间

## 可供性理论基础

### Gibson的核心概念

**可供性（Affordance）**：环境属性与智能体行动能力之间的关系。

- **客观性**：独立于智能体的感知而存在
- **关系性**：同时依赖于环境和智能体
- **可行动性**：直接关联到可能的行动

**示例**：
- 按钮**提供按压可供性**（对于有手指或指点设备的智能体）
- 搜索框**提供查询可供性**（对于有文本输入能力的智能体）
- 文件上传区域**提供拖拽可供性**（对于有拖放能力的智能体）

### 可供性 vs. 可用性

| 维度 | 可供性驱动 | 可用性驱动 |
|-----------|-------------------|------------------|
| **关注点** | 环境邀请哪些行动 | 功能使用的容易程度 |
| **起点** | 智能体-环境耦合 | 用户界面设计 |
| **核心问题** | "这里可以做什么？" | "这个好用吗？" |
| **设计驱动力** | 行动可能性 | 效率与满意度 |
| **度量方式** | 感知-行动的直接性 | 任务完成指标 |
### 为什么可供性在AI时代很重要

1. **AI-人类等价性**: AI智能体通过API、DOM结构和语义标记感知可供性——相同的环境线索，不同的感知系统
2. **上下文-行动耦合**: 可供性直接在环境中编码行动可能性，减少对显式指令的需求
3. **可发现性**: 设计良好的可供性是不言自明的，最小化人类和AI的学习曲线
4. **可组合性**: 复杂行为从组合简单、定义良好的可供性中涌现


## 🚀 快速入门：传统方法 → 可供性映射

**如果你熟悉传统PRD**，以下是概念映射方式：

| 传统概念 | 可供性等价概念 | 快速提示 |
|---------|--------------|---------|
| **功能特性** | 可供性（行动可能性） | 问：这使能了什么行动？ |
| **MVP** | MAS-1（第一个完整故事） | 聚焦于一个有意义的叙事 |
| **用户** | 智能体（人类/AI/两者） | 考虑两种感知通道 |
| **用例** | 可供性序列 | 感知 → 行动 → 反馈的链条 |
| **优先级（P0/P1/P2）** | MAS-1/MAS-2/MAS-3 | 故事完整性，而非功能特性 |
| **验收标准** | 感知标准 | 测试：可感知吗？可执行吗？ |

**30秒决策树：**

```
你对新范式感到舒适吗？
├─ 是 → 使用本版本（可供性 + MAS）
│         优势：更丰富的思考、AI就绪、意义驱动
└─ 否 → 使用传统MVP方法
          优势：熟悉、经过验证、利益相关者友好
```

**想要两者兼得？** 先编写可供性驱动的PRD（更深入的思考），然后为利益相关者提取传统PRD。

> 💡 **专业提示**: 即使你使用传统格式，理解可供性也会让你的需求更清晰、更可操作。

---

## 🔄 使用传统MVP方法

**当用户明确要求传统MVP风格的PRD时**，遵循以下步骤：

1. **加载传统技能参考：**
   ```
   读取文件: references/SKILL-traditional.md
   ```

2. **遵循传统的5阶段流程：**
   - 阶段1：定义产品概述
   - 阶段2：指定功能需求（P0/P1/P2优先级划分）
   - 阶段3：定义非功能需求
   - 阶段4：建立技术约束
   - 阶段5：创建验收标准

3. **生成传统PRD格式**，如参考文件中所指定

**触发传统方法的短语：**
- "使用传统PRD格式"
- "生成MVP风格的需求"
- "我更喜欢熟悉的PRD结构"
- "使用P0/P1/P2优先级划分"
- "遵循传统产品需求"

**注意：** 传统方法可在 `references/SKILL-traditional.md`（英文）和 `references/SKILL-traditional.zh.md`（中文）中参考。

---
## 何时使用此技能
## MAS: 最小可供故事

### 从 MVP 到 MAS

传统产品开发关注 **MVP（最小可行产品）** —— 能够交付价值的最小产品。在 AI 时代和可供性驱动设计中，我们引入 **MAS（最小可供故事）** —— 能够产生意义的最小连贯行动可能性叙事。

**范式对比：**

| 维度 | MVP（最小可行产品） | MAS（最小可供故事） |
|-----------|------------------------------|--------------------------------|
| **衡量标准** | 价值（效用） | 意义（重要性） |
| **交互焦点** | 可用性（易用性） | 可供性（行动可能性） |
| **外在形式** | 产品（人工制品） | 故事（叙事） |
| **演化路径** | 试错、自下而上 | 演绎、自上而下、仿生学 |
| **影响策略** | 外在奖励 | 内在动机（兴趣、热情） |
| **成功标准** | 市场验证 | 意义共鸣 |
| **智能体关系** | 用户消费产品 | 智能体栖居环境 |
| **设计问题** | "这有用吗？" | "这能邀请有意义的行动吗？" |

### MAS 的核心原则

**1. 意义优于价值**

- MVP 问："这能解决问题吗？"
- MAS 问："这个行动序列能创造意义吗？"
- 意义来自连贯的可供性叙事，而非孤立的功能

**2. 故事优于产品**

- MVP 交付产品（对象）
- MAS 交付故事（体验）
- 故事是智能体可以演绎的可供性序列
- 每个 MAS 都是完整的叙事弧：感知 → 行动 → 转化 → 反思

**3. 演绎优于试错**

- MVP：构建 → 测量 → 学习（归纳式、经验式）
- MAS：故事 → 可供性 → 实现（演绎式、原则式）
- MAS 源自感知-行动耦合的第一性原理
- 演化遵循自然模式（仿生学）

**4. 内在优于外在**

- MVP 优化外部指标（转化率、留存率、收入）
- MAS 优化内部体验（兴趣、精通、热情）
- 与内在动机对齐的可供性创造持续的参与

### MAS 结构

一个最小可供故事包含：

```
故事主题：[这能实现什么有意义的转化]
  ↓
核心可供性序列：[可感知行动的链条]
  ↓
意义闭合：[序列如何创造重要性]
```

**写作工具的 MAS 示例：**

```markdown
## MAS-01: 捕捉转瞬即逝的想法

**故事主题：**
在想法消失之前，将转瞬即逝的想法转化为永久笔记

**核心可供性序列：**
1. 入口可供性：一键创建笔记（感知：悬浮按钮）
2. 捕捉可供性：语音或文本输入（感知：输入框）
3. 闭合可供性：暂停时自动保存（感知：淡出动画）

**意义闭合：**
曾经短暂的想法，现在变得持久。智能体扩展了他们的记忆。

**内在动机：**
- 兴趣：捕捉洞察感觉很有收获
- 精通：越来越擅长外化思想
- 自主：无需强制分类或结构

**不包含（超出范围）：**
- 搜索（不同的故事："重新发现过去的洞察"）
- 分享（不同的故事："协作讨论想法"）
- 格式化（不同的故事："精炼表达"）
```
### 最小可供故事 vs. MVP 实践对比

**MVP 思维：**
"我们的最小可行产品需要登录、笔记创建和列表视图。让我们上线看看用户是否喜欢。"

**最小可供故事思维：**
"我们的第一个可供性故事是'捕捉转瞬即逝的想法'。什么是使这个故事完整且有意义的绝对最小可供性序列？登录不是这个故事的一部分——推迟身份验证可以保持故事流畅性。"

### 最小可供故事优先级

用**故事优先级**替代传统的功能优先级：

| 优先级 | 最小可供故事标准 | 传统 MVP 标准 |
|----------|--------------|-------------------------|
| **MAS-1** | 最基础的故事，使其他故事成为可能 | 核心价值主张 |
| **MAS-2** | 与 MAS-1 复合的故事 | 重要功能 |
| **MAS-3** | 面向高级智能体的故事 | 锦上添花的增强功能 |

**故事依赖关系：**

```
MAS-1: 捕捉想法
  ↓ (使能)
MAS-2: 重新发现想法
  ↓ (使能)
MAS-3: 连接想法
  ↓ (使能)
MAS-4: 分享洞察
```

每个故事本身都是完整的，同时又能使更丰富的故事成为可能。

### 在产品需求中实施最小可供故事

使用最小可供故事定义产品需求时：

1. **识别核心故事（而非功能）**
   - 智能体寻求什么有意义的转变？
   - 存在哪些完整的叙事弧？

2. **设计可供性序列（而非功能列表）**
   - 哪些感知-行动-反馈循环讲述了每个故事？
   - 完成叙事的绝对最小要素是什么？

3. **验证意义（而非效用）**
   - 完成这个故事是否创造了意义？
   - 智能体是否因内在动机而回归？

4. **通过演绎进化（而非迭代）**
   - 下一个合乎逻辑的故事扩展是什么？
   - 自然/认知科学告诉我们关于故事进展的什么信息？

### 可供性层级中的最小可供故事

最小可供故事映射到可供性层级：

| 最小可供故事 | 可供性层级 | 故事完成度 |
|-----|------------------|------------------|
| MAS-1 | 仅主要可供性 | 一个完整故事 |
| MAS-2 | 主要 + 次要可供性 | 有细微差别的故事 |
| MAS-3 | 所有层级 | 有精通路径的故事 |

**关键洞察：**

- MVP 以**功能**思考："添加搜索功能"
- 最小可供故事以**故事**思考："通过搜索可供性实现重新发现被遗忘洞察的故事"

可供性（搜索）是相同的，但最小可供故事将其嵌入到一个有意义的叙事中，从而指导设计决策（例如，搜索应该呈现偶然的连接，而不仅仅是精确匹配）。

---

**请记住：** 产品是被构建的。故事是被讲述的。在 AI 时代，智能体不想要产品——他们想成为有意义故事中的主角。

- 启动新产品或功能开发
- 重新设计交互模型
- 创建 AI 智能体友好的界面
- 定义多模态交互模式
- 建立清晰的行动空间
## 流程

### 阶段 1：定义产品环境

**产品环境模板：**

```markdown
## 产品环境

**名称：** [产品名称]
**标语：** [面向行动的描述："一个可以...的地方"、"一个用于...的环境"]
**版本：** [X.Y.Z]

**环境描述：**
[2-3 句话描述此产品创建的**行动空间**]

**主要智能体：**
- 智能体类型 1（及其行动能力）
- 智能体类型 2（及其行动能力）

**核心可供性：**
1. 主要可供性（支持行动 X）
2. 次要可供性（支持行动 Y）
3. 辅助可供性（支持行动 Z）
```

**需要回答的问题：**
- 此产品创建了什么样的行动空间？
- 哪些智能体将在此环境中行动？
- 基本的行动可能性是什么？
- 智能体如何感知这些可能性？

### 阶段 2：明确可供性结构

按照 **MAS（最小可供故事）** 组织 - 故事驱动的优先级排序：

| 优先级 | 描述 | 故事完整性 |
|----------|-------------|-------------------|
| **MAS-1** | 第一个完整的可供性故事 - 支持所有其他故事 | 基础叙事 |
| **MAS-2** | 与 MAS-1 复合的第二个故事 | 互补叙事 |
| **MAS-3** | 用于精通的高级故事 | 丰富叙事 |

**MAS 优先级框架：**

不是孤立的可供性，而是按照**完整故事**组织：

```markdown
## MAS-[N]：[故事标题]

**故事主题：** [这支持什么有意义的转变]

**核心可供性序列：**
1. [可供性 1]：[支持的行动]（感知：[能指]）
2. [可供性 2]：[支持的行动]（感知：[能指]）
3. [可供性 3]：[支持的行动]（感知：[能指]）

**意义闭合：**
[此序列如何为智能体创造意义]

**内在动机：**
- 兴趣：[什么使其引人入胜]
- 精通：[智能体如何通过重复改进]
- 自主：[智能体有什么选择]

**故事依赖：**
- 支持：[此故事之后可能出现什么故事]
- 需要：[此故事之前必须存在什么故事]

**超出范围：**
- [为保持故事连贯而故意排除的行动]
```

**每个 MAS 内的可供性层次：**

| 层级 | 描述 | 可感知性 | 故事角色 |
|-------|-------------|----------------|------------|
| **主要** | 核心行动 - 必须立即可感知 | 高 | 故事驱动 |
| **次要** | 支持行动 - 通过交互揭示 | 中 | 故事增强 |
| **潜在** | 高级行动 - 通过探索发现 | 低 | 故事精通 |
**可供性规约模板：**
```markdown
## 可供性：[可供性ID] [可供性名称]

**级别：** 主要/次要/潜在
**启用的操作：** [此可供性所支持的具体操作]

### 环境属性

| 属性 | 值 | 可被感知者 |
|----------|-------|----------------|
| 视觉线索 | 描述 | 人类 |
| 语义标记 | 描述 | AI智能体 |
| 交互模式 | 描述 | 两者 |

### 智能体要求

| 智能体类型 | 所需能力 |
|------------|----------------------|
| 人类 | 视觉、指点设备 |
| AI智能体 | DOM访问、点击能力 |

### 感知-行动耦合

**人类感知：**
- **看到**：[哪些视觉线索表明此可供性]
- **执行**：[邀请执行什么操作]
- **反馈**：[什么确认操作已执行]

**AI感知：**
- **检测**：[哪些语义/结构线索表明此可供性]
- **执行**：[使用什么API/交互方法]
- **验证**：[什么状态变化确认成功]

### 约束条件
- 约束条件1（来自real.md）
- 约束条件2

### 依赖关系
- **需要**：[必须存在的先决可供性]
- **启用**：[此可供性使之成为可能的后续可供性]
```

**标准可供性类别：**

| 类别 | 可供性示例 |
|----------|---------------------|
| **入口** | 注册、登录、访客访问 |
| **创建** | 编写、上传、撰写、生成 |
| **操作** | 编辑、移动、调整大小、转换 |
| **导航** | 浏览、搜索、筛选、跳转 |
| **通信** | 消息、分享、评论、通知 |
| **组织** | 标签、分类、分组、归档 |
| **观察** | 查看、预览、检查、监控 |

### 阶段3：定义环境约束

环境约束塑造了**可供性景观**：

**物理约束：**

| 约束 | 对可供性的影响 |
|------------|----------------------|
| 屏幕尺寸 | 限制同时可用的可供性 |
| 输入方法 | 定义交互可供性 |
| 网络延迟 | 影响实时可供性 |

**结构约束：**

| 约束 | 对可供性的影响 |
|------------|----------------------|
| 数据模型 | 定义可操作的内容 |
| 访问控制 | 按智能体限制操作可用性 |
| 状态依赖 | 排序可供性的可用性 |

**安全约束（来自real.md）：**

| 约束 | 可供性限制 |
|------------|----------------------|
| 数据隐私 | 某些数据不对所有智能体开放 |
| 速率限制 | 操作被人为限制 |
| 验证规则 | 约束操作参数 |
### 阶段 4：建立感知通道

智能体如何**发现和识别**可供性：

**对于人类智能体：**

```markdown
### 视觉可供性

| 元素 | 感知到的操作 | 设计模式 |
|---------|-----------------|----------------|
| 按钮 | 可按压 | 凸起、阴影、标签 |
| 输入框 | 可输入 | 边框、占位符文本 |
| 拖动手柄 | 可移动 | 抓握图标、光标变化 |
| 链接 | 可导航 | 着色、下划线 |
```

**对于 AI 智能体：**

```markdown
### 语义可供性

| 元素 | 语义标记 | 感知到的操作 |
|---------|----------------|------------------|
| `<button>` | role="button" | 可点击操作 |
| `<input>` | type="text" | 文本输入点 |
| `aria-label` | 描述性文本 | 操作目的 |
| `data-action` | 操作标识符 | 特定行为 |
```

**对于多模态智能体：**

```markdown
### 跨模态可供性

| 可供性 | 人类通道 | AI 通道 | 统一操作 |
|------------|---------------|------------|----------------|
| 提交表单 | 点击按钮 | POST 到端点 | 数据提交 |
| 上传文件 | 拖放 | 文件 API 调用 | 文件存储 |
| 搜索 | 输入 + 回车 | 查询参数 | 内容检索 |
```

### 阶段 5：定义反馈机制

可供性需要**清晰的反馈**来闭合感知-行动循环：

**即时反馈（< 100ms）：**

| 操作 | 人类反馈 | AI 反馈 |
|--------|---------------|-------------|
| 点击 | 视觉状态变化 | DOM 更新事件 |
| 输入 | 字符出现 | 值变化事件 |
| 拖动 | 元素跟随光标 | 位置更新 |

**进度反馈（< 1s）：**

| 操作 | 人类反馈 | AI 反馈 |
|--------|---------------|-------------|
| 表单提交 | 加载指示器 | 待处理状态 |
| 文件上传 | 进度条 | 上传进度事件 |
| 保存 | "保存中..." 消息 | 状态转换 |

**完成反馈（< 5s）：**

| 操作 | 人类反馈 | AI 反馈 |
|--------|---------------|-------------|
| 表单提交 | 成功消息 | 响应数据 |
| 文件上传 | "上传完成" | 成功回调 |
| 保存 | "已保存" 确认 | 状态已确认 |
### 阶段 6: 创建可供性验收标准

**验收标准模板：**

```markdown
## 可供性验证

### 可供性：[可供性名称]

| ID | 标准 | 人类测试 | AI 测试 |
|----|------|----------|---------|
| AFF-1 | 可供性可感知 | 视觉检查 | 语义检查 |
| AFF-2 | 动作可执行 | 用户交互 | API 调用 |
| AFF-3 | 反馈清晰 | 用户确认 | 状态验证 |
| AFF-4 | 约束得到遵守 | 边界测试 | 验证检查 |
```

**示例：**

```markdown
### 可供性：文件上传

| ID | 标准 | 人类测试 | AI 测试 |
|----|------|----------|---------|
| AFF-1 | 上传区域可见 | 用户看到拖放区 | 元素具有 dropzone 属性 |
| AFF-2 | 拖放功能正常 | 用户可以拖动文件 | FileReader API 可用 |
| AFF-3 | 显示进度 | 用户看到上传百分比 | 进度事件触发 |
| AFF-4 | 文件类型已验证 | 仅接受图片 | MIME 类型已检查 |
| AFF-5 | 强制执行大小限制 | 显示最大 10MB | 超出时返回 413 错误 |
```

## 产品需求文档结构（可供性驱动）

```markdown
# 产品需求文档（可供性驱动）

## 1. 产品环境
- 名称、标语、版本
- 行动空间描述
- 主要智能体
- 核心可供性

## 2. 可供性目录
### 2.1 主要可供性（立即可感知）
### 2.2 次要可供性（通过交互揭示）
### 2.3 潜在可供性（通过探索发现）

## 3. 环境约束
### 3.1 物理约束
### 3.2 结构约束
### 3.3 安全约束（来自 real.md）

## 4. 感知通道
### 4.1 视觉可供性（人类）
### 4.2 语义可供性（AI）
### 4.3 跨模态可供性（两者）

## 5. 反馈机制
- 即时反馈（< 100ms）
- 渐进反馈（< 1s）
- 完成反馈（< 5s）

## 6. 可供性验收标准
- 单个可供性验证
- 跨可供性交互

## 7. 非可供性（明确禁止的动作）
- 故意不支持的动作
- 每项的理由

## 8. 技术实现
- 前端可供性渲染
- 后端可供性支持
- 基础设施要求

## 9. 附录
### 9.1 可供性理论参考
### 9.2 术语表
### 9.3 传统可用性映射（供参考）
```

## 质量检查清单

- [ ] 核心可供性已明确定义
- [ ] 每个可供性都指定了它所支持的动作
- [ ] 为人类和 AI 定义了感知通道
- [ ] 反馈机制闭合了感知-行动循环
- [ ] 环境约束已记录（来自 real.md）
- [ ] 验收标准测试可供性的可感知性
- [ ] 非可供性明确防止混淆
- [ ] 智能体能力与可供性要求相匹配
## 与其他技能的集成

| 技能 | 关系 |
|-------|--------------|
| user-simulation | 输入：提供智能体行动能力 |
| user-story | 输出：可供性转化为行动场景 |
| system-architecture | 输出：可供性结构驱动架构设计 |
| interface-design | 输出：视觉/语义可供性实现 |
| quality-assurance | 输出：可供性验证测试 |

---

## 附录：从可用性到可供性

### 传统可用性框架（供参考）

传统的以可用性为中心的方法（为过渡到可供性驱动设计的团队保留）：

<details>
<summary>点击展开：传统可用性需求模板</summary>

#### 可用性需求

**性能需求：**

| 指标 | 目标 | 测量方式 |
|--------|--------|-------------|
| 页面加载 | < 3秒 | 首次内容绘制 |
| API 响应 | < 500毫秒 | 不包括外部调用 |
| 并发用户 | 100+ | 无性能下降 |

**安全需求：**

| 需求 | 实现方式 |
|-------------|----------------|
| 数据加密 | HTTPS、加密存储 |
| 身份认证 | JWT/Session 带过期时间 |
| 授权 | 基于角色的访问控制 |
| 输入验证 | 服务器端验证 |

**可访问性需求：**

| 需求 | 目标 |
|-------------|--------|
| 响应式设计 | 移动端 + 桌面端 |
| 可访问性 | WCAG 2.1 AA |
| 浏览器支持 | 现代浏览器（2年内） |

**可用性需求：**

| 指标 | 目标 |
|--------|--------|
| 正常运行时间 | 99% |
| 恢复时间 | < 1小时 |
| 备份频率 | 每日 |

</details>
### 映射表：可用性 → 可供性

| 可用性概念 | 可供性等价概念 |
|-------------------|----------------------|
| 功能 | 可供性（行动可能性） |
| 用户流程 | 可供性序列 |
| UI 元素 | 可供性信号 |
| 交互设计 | 感知-行动耦合 |
| 错误消息 | 约束反馈 |
| 帮助文本 | 可供性澄清 |
| 加载状态 | 渐进式可供性 |

### 为什么这种转变很重要

**传统思维**："我们需要一个用户可以轻松点击的按钮"
**可供性思维**："这个环境提供提交的可供性 - 通过按钮（人类）和表单动作（AI）可感知"

**传统思维**："搜索功能应该是用户友好的"
**可供性思维**："这个环境提供查询的可供性 - 通过搜索框（视觉）、输入元素（语义）和搜索 API（程序化）"

可供性视角通过关注环境提供的**行动可能性**，而不是分别关注"用户界面"和"API"设计，从而**统一**了人类和 AI 的交互。

---

**最后更新：** 2025-12-05
**文档版本：** v3.0（可供性驱动）
**维护者：** 42COG 团队
