---
name: product-requirements
description: 本技能用于编写产品需求文档（PRD）。帮助定义产品愿景、识别目标用户、指定功能需求、建立非功能需求并创建验收标准。
depends:
  - real.md
  - cog.md
generates:
  - spec-product-requirements.md
---

> **AI智能体注意**：本技能生成供AI/Agent（特别是Claude Code）使用的规约文档。生成规约前，必须从`real.md`和`cog.md`加载上下文。如果这些文件不存在，请先调用`00-meta`技能创建它们。

## 前置条件

### 执行前检查清单

使用本技能前，请验证：

1. **real.md存在** - 包含现实约束（最多4条必选 + 3条可选）
2. **cog.md存在** - 包含认知模型（智能体 + 信息 + 上下文）

如果任一文件缺失，请执行：
```
调用技能：00-meta
```

### 上下文加载

从`cog.md`中提取：
- **目标用户**：从智能体定义中识别用户类型
- **核心功能**：从信息流中识别关键功能
- **系统边界**：从上下文中识别集成点

从`real.md`中提取：
- **技术约束**：影响功能实现的技术限制
- **安全约束**：功能必须满足的安全要求
- **业务约束**：功能必须遵守的业务规则

# 产品需求

## 概述

本技能将产品创意转化为全面的需求文档。创建有效的PRD，需要定义产品愿景、识别目标用户、指定带优先级的功能、建立可衡量的验收标准。

## 使用场景

- 启动新产品或功能开发
- 记录现有产品需求
- 创建功能规格说明
- 为开发建立验收标准
- 向利益相关者传达产品范围

## 流程

### 阶段一：定义产品概述

**产品概述模板：**

```markdown
## 产品概述

**名称：** [产品名称]
**标语：** [一句话描述]
**版本：** [X.Y.Z]

**描述：**
[2-3句话描述产品做什么以及为什么重要]

**目标用户：**
- 用户群体1
- 用户群体2

**核心价值主张：**
1. 价值1
2. 价值2
3. 价值3
```

**需要回答的问题：**
- 这个产品解决什么问题？
- 主要用户是谁？
- 产品的独特之处是什么？
- 关键成功指标是什么？

### 阶段二：指定功能需求

按优先级组织功能：

| 优先级 | 描述 | 时间线 |
|--------|------|--------|
| P0 | 必须有 - 核心功能 | MVP |
| P1 | 应该有 - 重要功能 | v1.0 |
| P2 | 可以有 - 增强功能 | 未来 |

**功能规格模板：**

```markdown
## 功能：[功能ID] [功能名称]

**优先级：** P0/P1/P2
**描述：** [这个功能做什么]

### 需求

| ID | 需求 | 备注 |
|----|------|------|
| REQ-001 | 需求描述 | |
| REQ-002 | 需求描述 | |

### 约束
- 约束1（如适用引用real.md）
- 约束2

### 依赖
- 依赖于：[其他功能]
- 被依赖：[依赖此功能的功能]
```

**标准功能分类：**

| 分类 | 示例 |
|------|------|
| 认证 | 登录、注册、密码重置 |
| 核心功能 | 主要产品功能 |
| 用户管理 | 个人资料、设置、偏好 |
| 管理 | 管理面板、用户管理 |
| 集成 | 第三方服务、API |

### 阶段三：定义非功能需求

**性能需求：**

| 指标 | 目标 | 测量方式 |
|------|------|----------|
| 页面加载 | < 3秒 | 首次内容绘制 |
| API响应 | < 500ms | 不含外部调用 |
| 并发用户 | 100+ | 无性能下降 |

**安全需求：**

| 需求 | 实现方式 |
|------|----------|
| 数据加密 | HTTPS、加密存储 |
| 认证 | JWT/Session带过期 |
| 授权 | 基于角色的访问控制 |
| 输入验证 | 服务端验证 |

**可用性需求：**

| 需求 | 目标 |
|------|------|
| 响应式设计 | 移动端 + 桌面端 |
| 可访问性 | WCAG 2.1 AA |
| 浏览器支持 | 现代浏览器（2年内） |

**可用性需求：**

| 指标 | 目标 |
|------|------|
| 正常运行时间 | 99% |
| 恢复时间 | < 1小时 |
| 备份频率 | 每日 |

### 阶段四：建立技术约束

记录约束实现的技术决策：

```markdown
## 技术约束

**前端：**
- 框架：[例如 Next.js 15 + React 19]
- 样式：[例如 Tailwind CSS + shadcn/ui]
- 语言：[例如 TypeScript]

**后端：**
- 运行时：[例如 Node.js / Edge Runtime]
- API风格：[例如 REST / GraphQL]
- 数据库：[例如 PostgreSQL]

**基础设施：**
- 托管：[例如 Vercel]
- 数据库：[例如 Neon Serverless]
- CDN：[例如 Vercel Edge Network]
```

### 阶段五：创建验收标准

为每个功能定义可衡量的验收标准：

**验收标准模板：**

```markdown
## 验收标准

### 功能：[功能名称]

| ID | 标准 | 优先级 |
|----|------|--------|
| AC-1 | [可测试的标准] | 关键 |
| AC-2 | [可测试的标准] | 高 |
| AC-3 | [可测试的标准] | 中 |
```

**标准指南：**
- 需要时使用"Given-When-Then"格式
- 使标准可测试且无歧义
- 包含正向和负向用例
- 引用real.md中的约束

**示例：**

```markdown
### 功能：用户注册

| ID | 标准 | 优先级 |
|----|------|--------|
| AC-1 | 用户可以使用邮箱和密码注册 | 关键 |
| AC-2 | 密码使用bcrypt哈希存储 | 关键 |
| AC-3 | 首个注册用户成为管理员 | 关键 |
| AC-4 | 重复邮箱显示清晰错误 | 高 |
| AC-5 | 显示密码强度指示器 | 中 |
```

## PRD文档结构

```markdown
# 产品需求文档

## 1. 产品概述
- 名称、标语、版本
- 描述
- 目标用户
- 价值主张

## 2. 功能需求
### 2.1 功能分类1（P0）
### 2.2 功能分类2（P1）
### 2.3 功能分类3（P2）

## 3. 非功能需求
### 3.1 性能
### 3.2 安全
### 3.3 可用性
### 3.4 可靠性

## 4. 技术约束
- 前端技术栈
- 后端技术栈
- 基础设施

## 5. 验收标准
- 各功能标准
- 集成标准

## 6. 范围外
- 明确排除的功能

## 7. 附录
- 术语表
- 参考资料
```

## 质量检查清单

- [ ] 产品愿景清晰有吸引力
- [ ] 目标用户定义明确
- [ ] 所有P0功能有完整需求
- [ ] 非功能需求可衡量
- [ ] 技术约束已记录
- [ ] 验收标准可测试
- [ ] 范围外明确声明
- [ ] 引用了real.md中的约束

## 与其他技能的关系

| 技能 | 关系 |
|------|------|
| user-simulation | 输入：提供用户画像 |
| user-story | 输出：功能转化为用户故事 |
| system-architecture | 输出：需求驱动架构 |
| quality-assurance | 输出：验收标准转化为测试 |
