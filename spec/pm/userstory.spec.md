# 研究型教师成长系统 - 用户故事文档

<meta>
  <document-id>yanjiuxingteacher-userstory</document-id>
  <version>1.0.0</version>
  <project>研究型教师成长系统</project>
  <type>用户故事</type>
  <created>2025-12-17</created>
  <depends>real.md, cog.md, pr.spec.md</depends>
</meta>

---

## 复杂故事概览

| 复杂故事 | 最小故事数 | 优先级 | 故事类型分布 | 迭代 |
|---------|-----------|--------|-------------|------|
| CS-01: 教师入门 | 4 | P0 | 光明3, 黑暗1 | 迭代1 |
| CS-02: 观察与记录 | 5 | P0 | 光明3, 黑暗1, 灰色1 | 迭代1 |
| CS-03: 问题提炼 | 4 | P0 | 光明2, 黑暗1, 灰色1 | 迭代2 |
| CS-04: 研究设计 | 6 | P1 | 光明3, 黑暗2, 灰色1 | 迭代2 |
| CS-05: 数据收集 | 4 | P1 | 光明2, 灰色2 | 迭代3 |
| CS-06: 反思写作 | 4 | P1 | 光明2, 灰色2 | 迭代3 |
| CS-07: 成果分享 | 5 | P2 | 光明2, 黑暗1, 灰色2 | 迭代4 |
| CS-08: 学习路径 | 5 | P1 | 光明3, 灰色2 | 贯穿全程 |

**故事类型总体分布：**
- 光明故事：20个（54%）- 主要价值交付
- 黑暗故事：7个（19%）- 错误处理与安全
- 灰色故事：10个（27%）- 日常使用优化

---

## CS-01: 教师入门

**描述：** 教师从注册到首次使用系统的完整旅程
**用户类型：** 新注册教师
**核心价值：** 快速上手，建立对系统的信任

**故事类型分布：**
- 光明故事：3个（用户成长）
- 黑暗故事：1个（问题处理）

**包含的最小故事：**
- MS-L-01: 快速注册账户
- MS-L-02: 首次登录系统
- MS-L-03: 完成个人资料设置
- MS-D-01: 登录失败处理

**用户旅程：**
无账户 → 注册 → 登录 → 设置资料 → 开始使用

---

### MS-L-01: 快速注册账户

**复杂故事：** CS-01
**故事类型：** 光明（从无账户到有账户）
**优先级：** P0
**故事点数：** 3

#### 用户故事

作为一个**中小学教师**，
我想要**快速注册账户**，
以便**开始使用系统记录我的教学观察和研究**。

#### 故事评判（光明故事：从坏到好）

- **起点状态**：教师没有账户，无法使用系统
- **转折点**：系统提供简单的注册流程（邮箱+密码）
- **终点状态**：教师拥有账户，可以登录使用
- **情感体验**：从"被拒之门外" → "获得入场券"

#### 验收标准

**场景1：正常注册流程**
- 给定：教师访问注册页面
- 当：教师输入邮箱、密码、确认密码，选择学段和学科
- 那么：系统创建账户，发送验证邮件，自动登录

**场景2：邮箱已存在**
- 给定：教师使用已注册的邮箱
- 当：教师提交注册表单
- 那么：系统提示"该邮箱已注册"，建议登录或找回密码

**场景3：密码强度不足**
- 给定：教师输入弱密码（少于8位）
- 当：教师提交表单
- 那么：系统提示密码要求（至少8位，包含字母和数字）

#### 用户可感知的变化

- **操作前**：看到注册表单，字段清晰（邮箱、密码、学段、学科）
- **操作中**：实时验证输入，密码强度指示器
- **操作后**：看到"注册成功"提示，自动跳转到首页

#### 约束（来自 real.md）

- 教师数据必须隔离（C1）
- 邮箱需要加密存储（C1）

#### 依赖

- **需要**：无
- **使能**：MS-L-02（首次登录）

---

### MS-L-02: 首次登录系统

**复杂故事：** CS-01
**故事类型：** 光明（从门外到进入）
**优先级：** P0
**故事点数：** 2

#### 用户故事

作为一个**已注册的教师**，
我想要**使用邮箱和密码登录系统**，
以便**访问我的个人工作空间**。

#### 故事评判（光明故事：从坏到好）

- **起点状态**：教师在系统外部，无法访问功能
- **转折点**：系统验证身份，授予访问权限
- **终点状态**：教师进入个人工作空间
- **情感体验**：从"在门外" → "进入自己的空间"

#### 验收标准

- [ ] 教师可以看到登录表单（邮箱、密码）
- [ ] 教师输入正确凭证后，系统验证身份
- [ ] 系统创建会话，跳转到个人首页
- [ ] 首页显示欢迎信息和快速入口
- [ ] 系统记住登录状态（7天内免登录）

#### 用户可感知的变化

- **操作前**：看到登录表单
- **操作中**：点击"登录"按钮，看到加载指示
- **操作后**：进入个人首页，看到"欢迎回来，[姓名]"

#### 约束（来自 real.md）

- 必须强制登录才能使用功能（C1）
- 会话需要安全管理

#### 依赖

- **需要**：MS-L-01（已注册账户）
- **使能**：MS-L-03（设置资料）、CS-02（开始记录）

---

### MS-L-03: 完成个人资料设置

**复杂故事：** CS-01
**故事类型：** 光明（从空白到完整）
**优先级：** P0
**故事点数：** 2

#### 用户故事

作为一个**首次登录的教师**，
我想要**完善我的个人资料**（姓名、学校类型、教龄、当前阶段），
以便**系统为我推荐合适的课程和功能**。

#### 故事评判（光明故事：从坏到好）

- **起点状态**：教师资料不完整，系统无法个性化
- **转折点**：教师填写关键信息
- **终点状态**：系统了解教师背景，可以提供个性化服务
- **情感体验**：从"陌生人" → "被认识的个体"

#### 验收标准

- [ ] 首次登录时，系统引导教师完善资料
- [ ] 表单包含：姓名、学校类型、教龄、当前研究阶段
- [ ] 教师可以跳过，稍后完善
- [ ] 完成后，系统根据阶段推荐课程模块
- [ ] 资料保存成功，显示确认提示

#### 用户可感知的变化

- **操作前**：看到"完善资料"引导页
- **操作中**：填写表单，看到进度指示（3/4）
- **操作后**：看到"资料已保存"，系统推荐适合的课程

#### 约束（来自 real.md）

- 教师资料仅本人可见（C1）
- 支持渐进式学习路径（C6）

#### 依赖

- **需要**：MS-L-02（已登录）
- **使能**：CS-08（学习路径）

---

### MS-D-01: 登录失败处理

**复杂故事：** CS-01
**故事类型：** 黑暗（从顺利到受阻到恢复）
**优先级：** P0
**故事点数：** 2

#### 用户故事

作为一个**尝试登录的教师**，
我想要**在登录失败时得到清晰的提示和帮助**，
以便**快速解决问题并成功登录**。

#### 故事评判（黑暗故事：从好到坏到恢复）

- **起点状态**：教师尝试登录
- **转折点**：密码错误或账户不存在
- **终点状态**：系统提供清晰提示和解决方案
- **情感体验**：从"期待进入" → "受阻" → "得到帮助"

#### 验收标准

**场景1：密码错误**
- 给定：教师输入错误密码
- 当：教师点击登录
- 那么：系统提示"密码错误，请重试"，提供"忘记密码"链接

**场景2：账户不存在**
- 给定：教师输入未注册的邮箱
- 当：教师点击登录
- 那么：系统提示"该邮箱未注册"，提供"立即注册"链接

**场景3：多次失败锁定**
- 给定：教师连续5次输入错误密码
- 当：教师第6次尝试
- 那么：系统锁定账户15分钟，提示"请稍后再试或重置密码"

#### 用户可感知的变化

- **操作前**：教师输入凭证
- **操作中**：点击登录，看到验证过程
- **操作后**：看到错误提示（红色），提供解决方案链接

#### 约束（来自 real.md）

- 保护账户安全（防暴力破解）
- 提供友好的错误提示

#### 依赖

- **需要**：MS-L-01（注册功能存在）
- **使能**：密码重置功能

---

## CS-02: 观察与记录

**描述：** 教师记录课堂观察和教学反思的核心流程
**用户类型：** 所有教师
**核心价值：** 快速捕捉教学洞察，建立研究素材库

**故事类型分布：**
- 光明故事：3个（建立能力）
- 黑暗故事：1个（数据保护）
- 灰色故事：1个（日常使用）

**包含的最小故事：**
- MS-L-04: 快速创建观察记录
- MS-L-05: 使用语音输入记录
- MS-L-06: 学生信息去标识化
- MS-D-02: 敏感信息警告
- MS-G-01: 浏览历史观察记录

**用户旅程：**
发现洞察 → 快速记录 → 去标识化 → 保存 → 后续查看

---

### MS-L-04: 快速创建观察记录

**复杂故事：** CS-02
**故事类型：** 光明（从转瞬即逝到持久）
**优先级：** P0
**故事点数：** 3

#### 用户故事

作为一个**在课后的教师**，
我想要**快速创建一条观察记录**，
以便**在记忆还清晰时捕捉课堂中的重要观察**。

#### 故事评判（光明故事：从坏到好）

- **起点状态**：教学洞察转瞬即逝，容易遗忘
- **转折点**：系统提供一键创建入口
- **终点状态**：观察被记录下来，可以后续查看
- **情感体验**：从"担心遗忘" → "安心记录"

#### 验收标准

- [ ] 教师可以看到醒目的"+"悬浮按钮（右下角）
- [ ] 点击按钮后，立即打开记录表单
- [ ] 表单包含：标题、内容、观察焦点（下拉选择）
- [ ] 焦点自动定位到内容输入框
- [ ] 暂停输入2秒后，自动保存到本地
- [ ] 显示"已保存"状态和时间戳

#### 用户可感知的变化

- **操作前**：看到"+"按钮，始终可见
- **操作中**：点击后表单立即出现，开始输入
- **操作后**：看到"已保存"提示，可以继续输入或关闭

#### 约束（来自 real.md）

- 数据仅教师本人可访问（C1）
- 本地优先存储（C7）

#### 依赖

- **需要**：MS-L-02（已登录）
- **使能**：MS-L-05（语音输入）、MS-L-06（去标识化）

---

### MS-L-05: 使用语音输入记录

**复杂故事：** CS-02
**故事类型：** 光明（从费力到轻松）
**优先级：** P1
**故事点数：** 3

#### 用户故事

作为一个**时间紧张的教师**，
我想要**使用语音输入记录观察**，
以便**更快速地捕捉想法，无需打字**。

#### 故事评判（光明故事：从坏到好）

- **起点状态**：打字费时费力，影响记录效率
- **转折点**：系统提供语音输入功能
- **终点状态**：教师可以说话记录，大幅提升效率
- **情感体验**：从"费力打字" → "轻松说话"

#### 验收标准

- [ ] 记录表单中有语音输入按钮（麦克风图标）
- [ ] 点击按钮后，开始语音识别
- [ ] 实时显示识别的文字
- [ ] 支持暂停和继续
- [ ] 识别完成后，文字自动填充到内容框
- [ ] 教师可以编辑识别结果

#### 用户可感知的变化

- **操作前**：看到麦克风按钮
- **操作中**：点击后按钮变红，开始说话，看到文字实时出现
- **操作后**：文字填充到输入框，可以编辑

#### 约束（来自 real.md）

- 语音数据不上传到服务器（本地识别或加密传输）
- 识别结果需要去标识化检查

#### 依赖

- **需要**：MS-L-04（记录表单存在）
- **使能**：MS-L-06（去标识化）

---

### MS-L-06: 学生信息去标识化

**复杂故事：** CS-02
**故事类型：** 光明（从风险到安全）
**优先级：** P0
**故事点数：** 5

#### 用户故事

作为一个**记录观察的教师**，
我想要**系统帮我检查和去标识化学生信息**，
以便**保护学生隐私，符合伦理要求**。

#### 故事评判（光明故事：从坏到好）

- **起点状态**：教师可能无意中记录学生真实信息
- **转折点**：系统自动检测并提示去标识化
- **终点状态**：学生信息被代号替代，隐私得到保护
- **情感体验**：从"担心违规" → "安心合规"

#### 验收标准

- [ ] 教师输入内容时，系统实时检测姓名模式
- [ ] 检测到疑似姓名时，显示黄色警告提示
- [ ] 提示内容："请使用代号（如 S001）代替学生真实姓名"
- [ ] 提供"去标识化工具"按钮
- [ ] 点击工具后，系统建议替换方案（S001、学生A等）
- [ ] 教师确认后，自动替换文本
- [ ] 系统不存储学生真实信息到数据库

#### 用户可感知的变化

- **操作前**：教师输入观察内容
- **操作中**：输入"小明"时，看到黄色警告框
- **操作后**：点击工具，"小明"被替换为"S001"

#### 约束（来自 real.md）

- 必须去标识化学生信息（C2）
- 不得存储学生真实姓名、学号（C2）

#### 依赖

- **需要**：MS-L-04（记录功能）
- **使能**：MS-D-02（敏感信息警告）

---

### MS-D-02: 敏感信息警告

**复杂故事：** CS-02
**故事类型：** 黑暗（从疏忽到警觉）
**优先级：** P0
**故事点数：** 3

#### 用户故事

作为一个**记录观察的教师**，
我想要**在尝试保存包含敏感信息的记录时收到警告**，
以便**避免违反隐私保护规定**。

#### 故事评判（黑暗故事：从好到坏到恢复）

- **起点状态**：教师正常记录观察
- **转折点**：系统检测到未去标识化的敏感信息
- **终点状态**：系统阻止保存，提供修改建议
- **情感体验**：从"顺利记录" → "被阻止" → "理解原因并修正"

#### 验收标准

**场景1：检测到学生姓名**
- 给定：教师输入包含真实姓名的内容
- 当：教师点击保存
- 那么：系统显示红色警告"检测到学生真实姓名，请去标识化后再保存"

**场景2：检测到学校名称**
- 给定：教师输入包含学校全称的内容
- 当：教师点击保存
- 那么：系统提示"建议移除学校名称以保护隐私"

**场景3：强制去标识化**
- 给定：教师忽略警告，再次点击保存
- 当：系统再次检测到敏感信息
- 那么：系统拒绝保存，必须修改后才能保存

#### 用户可感知的变化

- **操作前**：教师点击保存按钮
- **操作中**：系统检测内容，显示加载
- **操作后**：看到红色警告框，保存被阻止

#### 约束（来自 real.md）

- 必须强制执行去标识化（C2）
- 保护学生隐私（C2）

#### 依赖

- **需要**：MS-L-06（去标识化功能）
- **使能**：数据安全保障

---

### MS-G-01: 浏览历史观察记录

**复杂故事：** CS-02
**故事类型：** 灰色（日常查看）
**优先级：** P1
**故事点数：** 2

#### 用户故事

作为一个**积累了多条观察的教师**，
我想要**浏览和查看我的历史观察记录**，
以便**回顾过去的教学洞察，为研究做准备**。

#### 故事评判（灰色故事：循环往复）

- **循环模式**：教师定期查看历史记录
- **优化点**：按时间、焦点分类，快速定位
- **习惯养成**：从"偶尔查看" → "定期回顾"
- **情感体验**：从"翻找困难" → "一目了然"

#### 验收标准

- [ ] 教师可以看到"我的观察"列表页
- [ ] 记录按时间倒序排列（最新在前）
- [ ] 每条记录显示：标题、日期、观察焦点标签
- [ ] 支持按焦点筛选（课堂教学、学生行为等）
- [ ] 点击记录可以查看详情
- [ ] 支持搜索（按标题或内容）

#### 用户可感知的变化

- **操作前**：点击"我的观察"菜单
- **操作中**：看到记录列表加载
- **操作后**：浏览记录，点击查看详情

#### 约束（来自 real.md）

- 仅显示教师本人的记录（C1）
- 数据本地优先加载（C7）

#### 依赖

- **需要**：MS-L-04（已有观察记录）
- **使能**：CS-03（问题提炼）

---

## CS-03: 问题提炼

**描述：** 从观察记录中提炼研究问题的流程
**用户类型：** 初级和中级教师
**核心价值：** 将模糊困惑转化为清晰的研究问题

**故事类型分布：**
- 光明故事：2个（能力提升）
- 黑暗故事：1个（AI 边界）
- 灰色故事：1个（问题管理）

**包含的最小故事：**
- MS-L-07: AI 辅助提炼问题
- MS-L-08: 编辑和确认问题
- MS-D-03: AI 建议标注清晰
- MS-G-02: 管理研究问题列表

**用户旅程：**
浏览观察 → 请求 AI 辅助 → 审阅建议 → 编辑问题 → 确认保存

---

### MS-L-07: AI 辅助提炼问题

**复杂故事：** CS-03
**故事类型：** 光明（从模糊到清晰）
**优先级：** P0
**故事点数：** 5

#### 用户故事

作为一个**有多条观察记录的教师**，
我想要**请求 AI 帮助我从观察中提炼研究问题**，
以便**将模糊的困惑转化为可研究的问题**。

#### 故事评判（光明故事：从坏到好）

- **起点状态**：教师有观察但不知如何提炼问题
- **转折点**：AI 分析观察，生成问题建议
- **终点状态**：教师获得清晰的问题方向
- **情感体验**：从"困惑迷茫" → "豁然开朗"

#### 验收标准

- [ ] 教师在观察详情页看到"AI 辅助提炼问题"按钮
- [ ] 点击按钮后，显示"AI 思考中..."加载动画
- [ ] AI 返回 2-3 个问题建议
- [ ] 每个建议包含：问题描述、问题类型（描述性/解释性/干预性）
- [ ] 所有建议明确标注"AI 辅助建议"（黄色标签）
- [ ] 教师可以选择一个建议进行编辑
- [ ] 教师可以拒绝所有建议，自己撰写

#### 用户可感知的变化

- **操作前**：看到"AI 辅助提炼问题"按钮
- **操作中**：点击后看到加载动画（3-5秒）
- **操作后**：看到 AI 建议列表，每个带"AI 辅助建议"标签

#### 约束（来自 real.md）

- AI 建议必须明确标注（C3）
- 教师自主决策是否采纳（C3）

#### 依赖

- **需要**：MS-G-01（已有观察记录）
- **使能**：MS-L-08（编辑问题）

---

### MS-L-08: 编辑和确认问题

**复杂故事：** CS-03
**故事类型：** 光明（从建议到自主）
**优先级：** P0
**故事点数：** 2

#### 用户故事

作为一个**收到 AI 问题建议的教师**，
我想要**审阅、编辑和确认研究问题**，
以便**确保问题符合我的研究意图和教学情境**。

#### 故事评判（光明故事：从坏到好）

- **起点状态**：AI 建议可能不完全符合教师意图
- **转折点**：教师可以自由编辑问题
- **终点状态**：问题完全符合教师的研究方向
- **情感体验**：从"被动接受" → "主动掌控"

#### 验收标准

- [ ] 教师选择一个 AI 建议后，进入编辑页面
- [ ] 编辑页面包含：问题描述、问题背景、问题类型
- [ ] 教师可以修改所有字段
- [ ] 系统保留"来源：AI 辅助生成，已由教师修改"标记
- [ ] 点击"确认"后，问题保存到问题列表
- [ ] 显示"问题已保存"确认提示

#### 用户可感知的变化

- **操作前**：选择一个 AI 建议
- **操作中**：在编辑器中修改问题文本
- **操作后**：看到"问题已保存"提示，跳转到问题列表

#### 约束（来自 real.md）

- 教师必须审阅 AI 建议（C3）
- 问题归属于教师本人（C1）

#### 依赖

- **需要**：MS-L-07（AI 建议）
- **使能**：CS-04（研究设计）

---

### MS-D-03: AI 建议标注清晰

**复杂故事：** CS-03
**故事类型：** 黑暗（从混淆到清晰）
**优先级：** P0
**故事点数：** 2

#### 用户故事

作为一个**使用 AI 辅助的教师**，
我想要**清楚地知道哪些内容是 AI 生成的**，
以便**保持对研究的主体性和判断力**。

#### 故事评判（黑暗故事：从好到坏到恢复）

- **起点状态**：教师使用 AI 功能
- **转折点**：可能混淆 AI 建议和自己的想法
- **终点状态**：系统清晰标注，教师保持清醒
- **情感体验**：从"可能混淆" → "清晰区分" → "保持主体性"

#### 验收标准

- [ ] 所有 AI 生成的内容都有"AI 辅助建议"标签（黄色）
- [ ] 标签位置醒目，不可忽视
- [ ] 教师编辑后，标签变为"AI 辅助生成，已由教师修改"
- [ ] 完全由教师撰写的内容无标签
- [ ] 问题详情页显示来源信息

#### 用户可感知的变化

- **操作前**：教师查看问题或建议
- **操作中**：看到黄色"AI 辅助建议"标签
- **操作后**：清楚知道内容来源

#### 约束（来自 real.md）

- AI 生成内容必须明确标注（C3）
- 防止教师过度依赖 AI（C3）

#### 依赖

- **需要**：MS-L-07（AI 功能）
- **使能**：教师主体性保护

---

### MS-G-02: 管理研究问题列表

**复杂故事：** CS-03
**故事类型：** 灰色（日常管理）
**优先级：** P1
**故事点数：** 2

#### 用户故事

作为一个**提出了多个研究问题的教师**，
我想要**查看和管理我的问题列表**，
以便**选择合适的问题开展研究**。

#### 故事评判（灰色故事：循环往复）

- **循环模式**：教师定期查看和更新问题列表
- **优化点**：按状态分类，快速定位
- **习惯养成**：从"零散" → "有序管理"
- **情感体验**：从"杂乱" → "清晰"

#### 验收标准

- [ ] 教师可以看到"我的研究问题"列表页
- [ ] 问题按状态分组（待研究、研究中、已完成）
- [ ] 每个问题显示：问题描述、类型、来源、创建日期
- [ ] 支持拖拽调整优先级
- [ ] 点击问题可以查看详情或开始研究
- [ ] 支持删除或归档问题

#### 用户可感知的变化

- **操作前**：点击"我的研究问题"菜单
- **操作中**：看到问题列表，按状态分组
- **操作后**：选择一个问题，开始研究设计

#### 约束（来自 real.md）

- 仅显示教师本人的问题（C1）

#### 依赖

- **需要**：MS-L-08（已有问题）
- **使能**：CS-04（研究设计）

---

## CS-04: 研究设计

**描述：** 将研究问题转化为可实施的研究方案
**用户类型：** 中级教师
**核心价值：** 设计可行的小规模行动研究

**故事类型分布：**
- 光明故事：3个（能力建构）
- 黑暗故事：2个（伦理保障）
- 灰色故事：1个（方案管理）

**包含的最小故事：**
- MS-L-09: 选择研究方法模板
- MS-L-10: AI 辅助生成研究框架
- MS-L-11: 自主设计研究方案
- MS-D-04: 研究伦理审查指引
- MS-D-05: 伦理检查清单确认
- MS-G-03: 管理研究项目

**用户旅程：**
选择问题 → 选择方法 → AI 生成框架 → 自主设计 → 伦理审查 → 创建项目

---

### MS-L-09: 选择研究方法模板

**复杂故事：** CS-04
**故事类型：** 光明（从不知如何开始到有路径）
**优先级：** P1
**故事点数：** 3

#### 用户故事

作为一个**确定了研究问题的教师**，
我想要**选择合适的研究方法模板**，
以便**了解如何设计研究方案**。

#### 故事评判（光明故事：从坏到好）

- **起点状态**：教师不知道如何设计研究
- **转折点**：系统提供多种研究方法模板
- **终点状态**：教师选择了合适的方法，有了设计方向
- **情感体验**：从"无从下手" → "有章可循"

#### 验收标准

- [ ] 教师在问题详情页看到"开始研究设计"按钮
- [ ] 点击后，显示研究方法模板库
- [ ] 模板包括：行动研究、案例研究、观察研究、混合方法
- [ ] 每个模板显示：名称、适用场景、步骤概览
- [ ] 教师选择模板后，加载模板内容到编辑器
- [ ] 模板内容包括：研究设计框架、数据收集方法、分析方法

#### 用户可感知的变化

- **操作前**：看到"开始研究设计"按钮
- **操作中**：浏览模板库，阅读说明
- **操作后**：选择模板，看到框架加载到编辑器

#### 约束（来自 real.md）

- 支持渐进式学习（C6）
- 模板适合不同阶段教师（C6）

#### 依赖

- **需要**：MS-G-02（已有研究问题）
- **使能**：MS-L-10（AI 生成框架）

---

### MS-L-10: AI 辅助生成研究框架

**复杂故事：** CS-04
**故事类型：** 光明（从框架到具体）
**优先级：** P1
**故事点数：** 5

#### 用户故事

作为一个**选择了研究方法的教师**，
我想要**AI 帮助我生成具体的研究框架**，
以便**快速形成研究方案的初稿**。

#### 故事评判（光明故事：从坏到好）

- **起点状态**：教师有模板但不知如何具体化
- **转折点**：AI 根据问题和方法生成具体框架
- **终点状态**：教师获得可编辑的研究方案初稿
- **情感体验**：从"抽象" → "具体"

#### 验收标准

- [ ] 教师在编辑器中看到"AI 辅助生成框架"按钮
- [ ] 点击后，AI 根据问题和方法生成框架
- [ ] 框架包括：研究目标、数据收集计划、分析方法、预期成果
- [ ] 所有 AI 生成内容标注"AI 辅助建议"
- [ ] 教师可以接受、修改或拒绝建议
- [ ] 生成时间 < 10秒

#### 用户可感知的变化

- **操作前**：看到"AI 辅助生成框架"按钮
- **操作中**：点击后看到"AI 生成中..."（5-10秒）
- **操作后**：看到具体的研究框架，带"AI 辅助建议"标签

#### 约束（来自 real.md）

- AI 建议必须明确标注（C3）
- 教师自主设计方案（C3）

#### 依赖

- **需要**：MS-L-09（已选择方法）
- **使能**：MS-L-11（自主设计）

---

### MS-L-11: 自主设计研究方案

**复杂故事：** CS-04
**故事类型：** 光明（从初稿到完整）
**优先级：** P1
**故事点数：** 3

#### 用户故事

作为一个**获得 AI 框架建议的教师**，
我想要**根据我的教学情境自主设计研究方案**，
以便**确保方案符合我的实际需求**。

#### 故事评判（光明故事：从坏到好）

- **起点状态**：AI 框架是通用的，不完全适合
- **转折点**：教师根据情境调整方案
- **终点状态**：方案完全符合教师的教学情境
- **情感体验**：从"通用" → "个性化"

#### 验收标准

- [ ] 教师可以编辑研究方案的所有部分
- [ ] 编辑器提供结构化输入（研究目标、方法、计划等）
- [ ] 支持添加自定义字段
- [ ] 实时自动保存（本地优先）
- [ ] 显示保存状态和时间戳
- [ ] 教师可以预览完整方案

#### 用户可感知的变化

- **操作前**：看到 AI 生成的框架
- **操作中**：编辑各个部分，看到实时保存
- **操作后**：完成方案，看到"已保存"提示

#### 约束（来自 real.md）

- 教师完全掌控研究方向（C3）
- 数据本地优先存储（C7）

#### 依赖

- **需要**：MS-L-10（AI 框架）
- **使能**：MS-D-04（伦理审查）

---

### MS-D-04: 研究伦理审查指引

**复杂故事：** CS-04
**故事类型：** 黑暗（从疏忽到合规）
**优先级：** P0
**故事点数：** 3

#### 用户故事

作为一个**设计研究方案的教师**，
我想要**了解研究伦理的基本要求**，
以便**确保我的研究符合伦理规范，不伤害学生**。

#### 故事评判（黑暗故事：从好到坏到恢复）

- **起点状态**：教师可能不了解研究伦理
- **转折点**：系统提供伦理审查指引
- **终点状态**：教师了解要求，设计合规的研究
- **情感体验**：从"不知道风险" → "意识到风险" → "知道如何规避"

#### 验收标准

- [ ] 教师在研究设计页面看到"伦理审查指引"链接
- [ ] 点击后，显示伦理指引文档
- [ ] 指引包括：知情同意、数据保护、学生权益、研究伦理原则
- [ ] 提供案例说明（什么可以做，什么不能做）
- [ ] 教师可以下载指引文档
- [ ] 阅读后，教师需要勾选"我已阅读并理解"

#### 用户可感知的变化

- **操作前**：看到"伦理审查指引"链接（醒目）
- **操作中**：阅读指引文档
- **操作后**：勾选确认，继续设计

#### 约束（来自 real.md）

- 必须提供伦理指引（C4）
- 确保教师了解伦理要求（C4）

#### 依赖

- **需要**：MS-L-11（研究方案编辑中）
- **使能**：MS-D-05（伦理检查清单）

---

### MS-D-05: 伦理检查清单确认

**复杂故事：** CS-04
**故事类型：** 黑暗（从风险到保障）
**优先级：** P0
**故事点数：** 2

#### 用户故事

作为一个**完成研究方案的教师**，
我想要**通过伦理检查清单确认**，
以便**确保我的研究不会违反伦理规范**。

#### 故事评判（黑暗故事：从好到坏到恢复）

- **起点状态**：教师完成方案，准备创建项目
- **转折点**：系统要求通过伦理检查
- **终点状态**：教师确认所有伦理要点，项目创建
- **情感体验**：从"急于开始" → "被要求检查" → "安心合规"

#### 验收标准

**场景1：正常通过**
- 给定：教师完成研究方案
- 当：教师点击"创建项目"
- 那么：系统显示伦理检查清单（5-7项）

**场景2：必须全部勾选**
- 给定：教师未勾选所有项
- 当：教师点击"确认创建"
- 那么：系统提示"请确认所有伦理要点"，无法创建

**场景3：成功创建**
- 给定：教师勾选所有项
- 当：教师点击"确认创建"
- 那么：项目创建成功，跳转到项目页面

#### 用户可感知的变化

- **操作前**：点击"创建项目"
- **操作中**：看到伦理检查清单弹窗
- **操作后**：勾选所有项，项目创建成功

#### 约束（来自 real.md）

- 必须通过伦理审查（C4）
- 涉及学生数据必须审查（C4）

#### 依赖

- **需要**：MS-D-04（已阅读指引）
- **使能**：CS-05（数据收集）

---

### MS-G-03: 管理研究项目

**复杂故事：** CS-04
**故事类型：** 灰色（日常管理）
**优先级：** P1
**故事点数：** 2

#### 用户故事

作为一个**创建了多个研究项目的教师**，
我想要**查看和管理我的项目列表**，
以便**跟踪研究进度，选择当前工作的项目**。

#### 故事评判（灰色故事：循环往复）

- **循环模式**：教师定期查看和更新项目状态
- **优化点**：按阶段分类，进度可视化
- **习惯养成**：从"零散" → "系统管理"
- **情感体验**：从"混乱" → "有序"

#### 验收标准

- [ ] 教师可以看到"我的研究项目"列表页
- [ ] 项目按阶段分组（设计、实施、分析、完成）
- [ ] 每个项目显示：标题、方法、进度、创建日期
- [ ] 支持拖拽调整优先级
- [ ] 点击项目可以查看详情或继续工作
- [ ] 支持归档已完成的项目

#### 用户可感知的变化

- **操作前**：点击"我的研究项目"菜单
- **操作中**：看到项目列表，按阶段分组
- **操作后**：选择一个项目，继续研究

#### 约束（来自 real.md）

- 仅显示教师本人的项目（C1）

#### 依赖

- **需要**：MS-D-05（已创建项目）
- **使能**：CS-05（数据收集）

---

## 故事地图

```
用户旅程：入门 → 记录 → 提炼 → 设计 → 实施 → 反思 → 分享 → 成长

迭代1（MVP - 4周）：
├── CS-01: 教师入门
│   ├── MS-L-01: 快速注册（光明）- 3点
│   ├── MS-L-02: 首次登录（光明）- 2点
│   ├── MS-L-03: 完善资料（光明）- 2点
│   └── MS-D-01: 登录失败（黑暗）- 2点
├── CS-02: 观察与记录
│   ├── MS-L-04: 快速创建记录（光明）- 3点
│   ├── MS-L-05: 语音输入（光明）- 3点
│   ├── MS-L-06: 去标识化（光明）- 5点
│   ├── MS-D-02: 敏感信息警告（黑暗）- 3点
│   └── MS-G-01: 浏览记录（灰色）- 2点
└── 总计：25 故事点

迭代2（成长 - 4周）：
├── CS-03: 问题提炼
│   ├── MS-L-07: AI 提炼问题（光明）- 5点
│   ├── MS-L-08: 编辑问题（光明）- 2点
│   ├── MS-D-03: AI 标注（黑暗）- 2点
│   └── MS-G-02: 问题管理（灰色）- 2点
├── CS-04: 研究设计
│   ├── MS-L-09: 选择模板（光明）- 3点
│   ├── MS-L-10: AI 生成框架（光明）- 5点
│   ├── MS-L-11: 自主设计（光明）- 3点
│   ├── MS-D-04: 伦理指引（黑暗）- 3点
│   ├── MS-D-05: 伦理检查（黑暗）- 2点
│   └── MS-G-03: 项目管理（灰色）- 2点
└── 总计：29 故事点

迭代3（深化 - 4周）：
├── CS-05: 数据收集
│   ├── MS-L-12: 记录数据（光明）- 3点
│   ├── MS-L-13: 本地存储（光明）- 3点
│   ├── MS-G-04: 数据管理（灰色）- 2点
│   └── MS-G-05: 云端同步（灰色）- 3点
├── CS-06: 反思写作
│   ├── MS-L-14: 创建反思（光明）- 2点
│   ├── MS-L-15: AI 反思提示（光明）- 3点
│   ├── MS-G-06: 反思管理（灰色）- 2点
│   └── MS-G-07: 关联项目（灰色）- 2点
└── 总计：20 故事点

迭代4（传播 - 4周）：
├── CS-07: 成果分享
│   ├── MS-L-16: 撰写成果（光明）- 3点
│   ├── MS-L-17: 自动匿名化（光明）- 5点
│   ├── MS-D-06: 匿名化确认（黑暗）- 2点
│   ├── MS-G-08: 发布社区（灰色）- 3点
│   └── MS-G-09: 浏览学习（灰色）- 2点
└── 总计：15 故事点

贯穿全程：
└── CS-08: 学习路径
    ├── MS-L-18: 阶段识别（光明）- 2点
    ├── MS-L-19: 课程推荐（光明）- 3点
    ├── MS-L-20: 学习课程（光明）- 3点
    ├── MS-G-10: 任务实践（灰色）- 2点
    └── MS-G-11: 进阶提示（灰色）- 2点
    总计：12 故事点
```

**总体统计：**
- 总故事点数：101 点
- 预计总工期：16 周（4 个迭代）
- 平均每迭代：25 点
- 团队规模建议：3-4 人

---

## 实现建议

### 迭代1：建立基础（4周）

**目标：** 教师可以注册、登录、记录观察

**交付价值：**
- 教师可以快速注册并登录系统
- 教师可以记录课堂观察（文字/语音）
- 系统自动提示学生信息去标识化
- 观察记录本地优先存储

**故事类型分布：**
- 光明故事：6个（67%）- 快速展示价值
- 黑暗故事：2个（22%）- 安全保障
- 灰色故事：1个（11%）- 基础体验

**技术重点：**
- 用户认证系统
- 本地存储（LocalStorage/IndexedDB）
- 语音识别集成
- 去标识化检测算法

---

### 迭代2：提升能力（4周）

**目标：** 教师可以从观察中提炼问题，设计研究方案

**交付价值：**
- 教师可以请求 AI 帮助提炼研究问题
- 教师可以选择研究方法模板
- AI 辅助生成研究框架
- 系统提供伦理审查指引

**故事类型分布：**
- 光明故事：5个（50%）- 能力建构
- 黑暗故事：3个（30%）- AI 边界与伦理
- 灰色故事：2个（20%）- 管理优化

**技术重点：**
- AI 集成（Vercel AI SDK）
- AI 标注组件
- 研究方法模板库
- 伦理审查系统

---

### 迭代3：深化实践（4周）

**目标：** 教师可以收集数据，撰写反思

**交付价值：**
- 教师可以系统地记录研究数据
- 数据本地优先，云端可选同步
- 教师可以撰写结构化反思日志
- AI 提供反思写作提示

**故事类型分布：**
- 光明故事：4个（50%）- 实践深化
- 灰色故事：4个（50%）- 日常优化

**技术重点：**
- 数据管理系统
- 云端同步机制
- 反思写作编辑器
- AI 反思提示生成

---

### 迭代4：社区传播（4周）

**目标：** 教师可以分享研究成果，在社区中学习

**交付价值：**
- 教师可以撰写研究报告
- 系统自动匿名化敏感信息
- 教师可以发布到社区
- 教师可以浏览其他教师的成果

**故事类型分布：**
- 光明故事：2个（40%）- 成果产出
- 黑暗故事：1个（20%）- 隐私保护
- 灰色故事：2个（40%）- 社区互动

**技术重点：**
- 匿名化算法
- 社区发布系统
- 内容浏览与搜索
- 隐私保护机制

---

## 测试指南

### 光明故事测试重点

**测试目标：** 验证用户能够从"坏"到"好"的转变

**测试方法：**
1. 记录用户起点状态（困境/限制）
2. 执行系统提供的操作
3. 验证用户达到终点状态（目标/能力）
4. 确认情感体验符合预期

**示例：MS-L-01（快速注册）**
- 起点：用户无账户，无法使用
- 操作：填写注册表单，提交
- 终点：用户有账户，可以登录
- 验证：注册成功提示，自动登录

### 黑暗故事测试重点

**测试目标：** 验证系统能够帮助用户识别和解决问题

**测试方法：**
1. 模拟正常操作状态
2. 触发问题或错误
3. 验证系统提供清晰提示和解决方案
4. 确认用户能够恢复正常

**示例：MS-D-02（敏感信息警告）**
- 正常：用户记录观察
- 问题：输入学生真实姓名
- 提示：系统显示警告，阻止保存
- 恢复：用户去标识化后成功保存

### 灰色故事测试重点

**测试目标：** 验证重复操作的效率和体验

**测试方法：**
1. 记录首次操作的时间和步骤
2. 重复操作多次
3. 验证操作效率提升
4. 确认用户形成使用习惯

**示例：MS-G-01（浏览记录）**
- 首次：用户需要熟悉界面
- 重复：用户快速定位目标记录
- 优化：筛选、搜索功能提升效率
- 习惯：用户定期回顾记录

---

## 附录：故事优先级决策矩阵

| 故事ID | 用户价值 | 技术复杂度 | 依赖关系 | 优先级 | 迭代 |
|--------|---------|-----------|---------|--------|------|
| MS-L-01 | 高 | 低 | 无 | P0 | 1 |
| MS-L-02 | 高 | 低 | MS-L-01 | P0 | 1 |
| MS-L-04 | 高 | 中 | MS-L-02 | P0 | 1 |
| MS-L-06 | 高 | 高 | MS-L-04 | P0 | 1 |
| MS-L-07 | 高 | 高 | MS-G-01 | P0 | 2 |
| MS-L-10 | 中 | 高 | MS-L-09 | P1 | 2 |
| MS-D-04 | 高 | 中 | MS-L-11 | P0 | 2 |
| MS-L-17 | 中 | 高 | MS-L-16 | P2 | 4 |

**决策规则：**
- P0：高用户价值 + 低/中复杂度 + 无/少依赖
- P1：中/高用户价值 + 中复杂度 + 有依赖
- P2：中用户价值 + 高复杂度 + 多依赖

---

**文档维护者：** 路屿
**最后更新：** 2025-12-17
**文档版本：** 1.0.0
**文档类型：** 用户故事（基于三个最小故事）
