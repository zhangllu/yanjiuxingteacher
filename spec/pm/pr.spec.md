# 研究型教师成长系统 - 产品需求文档（可供性驱动）

<meta>
  <document-id>yanjiuxingteacher-prd</document-id>
  <version>1.0.0</version>
  <project>研究型教师成长系统</project>
  <type>产品需求</type>
  <created>2025-12-17</created>
  <depends>real.md, cog.md</depends>
</meta>

---

## 1. 产品环境

**名称：** 研究型教师成长系统

**标语：** 一个帮助教师将教学经验转化为研究能力的成长环境

**版本：** 0.1.0

**环境描述：**

本系统创建了一个支持教师进行教育研究的行动空间。在这个环境中，教师可以记录教学观察、提炼研究问题、设计研究方案、收集分析数据、撰写反思日志，并在社区中分享研究成果。AI 作为"理解协助与思考伴随工具"，帮助教师在研究过程中获得支持，但始终保持教师的主体性和专业判断。

**主要智能体：**

- **教师（Teacher）**：核心用户，具备观察、记录、思考、设计研究、分析数据、撰写报告的能力
- **AI 研究助手（AI Research Assistant）**：辅助智能体，具备提炼观察、生成问题框架、辅助研究设计、支持反思写作的能力

**核心可供性：**

1. **观察记录可供性**：支持教师快速记录课堂观察和教学反思
2. **问题提炼可供性**：支持教师从观察中提炼研究问题（AI 辅助）
3. **研究设计可供性**：支持教师设计小规模行动研究方案
4. **数据管理可供性**：支持教师收集、存储和分析研究数据
5. **反思写作可供性**：支持教师撰写结构化的反思日志
6. **成果分享可供性**：支持教师在社区中匿名分享研究成果
7. **学习路径可供性**：支持教师按阶段学习研究方法

---

## 2. 最小可供故事（MAS）优先级

### MAS-1：捕捉教学洞察

**故事主题：**
将课堂中转瞬即逝的教学观察转化为持久的研究素材

**核心可供性序列：**

1. **快速入口可供性**：一键创建观察记录（感知：悬浮按钮/快捷入口）
2. **记录可供性**：文字或语音输入观察内容（感知：输入框/语音按钮）
3. **去标识化可供性**：自动提示学生信息去标识化（感知：提示框/辅助工具）
4. **自动保存可供性**：暂停时自动保存到本地（感知：保存状态指示）

**意义闭合：**
曾经短暂的课堂观察，现在变得持久且可追溯。教师建立了研究的起点。

**内在动机：**
- 兴趣：捕捉教学洞察感觉很有收获
- 精通：越来越擅长观察和记录
- 自主：无需强制分类或复杂结构

**故事依赖：**
- 支持：MAS-2（从观察中发现问题）
- 需要：无（这是第一个故事）

**超出范围：**
- 搜索历史观察（不同的故事）
- 分享观察记录（不同的故事）
- AI 分析观察（不同的故事）

---

### MAS-2：从观察到问题

**故事主题：**
将零散的教学观察转化为清晰的研究问题

**核心可供性序列：**

1. **浏览观察可供性**：查看历史观察记录（感知：列表视图/时间线）
2. **AI 提炼可供性**：请求 AI 帮助提炼研究问题（感知：AI 辅助按钮）
3. **问题编辑可供性**：教师审阅和修改 AI 建议（感知：编辑器/标注"AI 辅助建议"）
4. **问题确认可供性**：保存为正式研究问题（感知：确认按钮）

**意义闭合：**
曾经模糊的困惑，现在变成了可研究的问题。教师明确了研究方向。

**内在动机：**
- 兴趣：发现问题背后的规律很有成就感
- 精通：越来越擅长提出有价值的问题
- 自主：AI 只是建议，教师自主决策

**故事依赖：**
- 支持：MAS-3（设计研究方案）
- 需要：MAS-1（必须先有观察记录）

**超出范围：**
- 直接实施研究（不同的故事）
- 分享研究问题（不同的故事）

---

### MAS-3：设计可行的研究

**故事主题：**
将研究问题转化为可在课堂中实施的行动研究方案

**核心可供性序列：**

1. **选择问题可供性**：从问题列表中选择待研究问题（感知：问题卡片）
2. **方法模板可供性**：选择研究方法模板（感知：模板库）
3. **AI 框架可供性**：AI 辅助生成研究框架（感知：AI 辅助按钮/标注）
4. **方案编辑可供性**：教师自主设计研究方案（感知：结构化编辑器）
5. **伦理检查可供性**：系统提供伦理审查指引（感知：检查清单）
6. **项目创建可供性**：保存为研究项目（感知：创建按钮）

**意义闭合：**
曾经抽象的问题，现在有了具体的研究路径。教师准备好了行动。

**内在动机：**
- 兴趣：设计研究方案激发创造力
- 精通：越来越擅长研究设计
- 自主：教师完全掌控研究方向

**故事依赖：**
- 支持：MAS-4（实施研究并收集数据）
- 需要：MAS-2（必须先有研究问题）

**超出范围：**
- 数据分析（不同的故事）
- 成果撰写（不同的故事）

---

### MAS-4：收集研究证据

**故事主题：**
在教学实践中系统地收集研究数据

**核心可供性序列：**

1. **数据记录可供性**：记录研究数据（感知：数据输入表单）
2. **去标识化提醒可供性**：自动检查学生信息（感知：警告提示）
3. **本地存储可供性**：数据优先保存到本地（感知：本地存储指示）
4. **云端同步可供性**：可选的云端备份（感知：同步按钮/状态）

**意义闭合：**
曾经零散的教学片段，现在成为了系统的研究证据。教师积累了研究素材。

**内在动机：**
- 兴趣：看到数据积累很有成就感
- 精通：越来越擅长数据收集
- 自主：教师控制数据存储位置

**故事依赖：**
- 支持：MAS-5（分析数据并得出发现）
- 需要：MAS-3（必须先有研究项目）

**超出范围：**
- 数据分析（不同的故事）
- 数据可视化（不同的故事）

---

### MAS-5：反思与成长

**故事主题：**
通过结构化反思将研究经验转化为专业成长

**核心可供性序列：**

1. **反思入口可供性**：创建反思日志（感知：反思按钮）
2. **AI 结构化可供性**：AI 提供反思框架建议（感知：AI 辅助按钮/标注）
3. **反思写作可供性**：教师撰写反思内容（感知：富文本编辑器）
4. **关联项目可供性**：将反思关联到研究项目（感知：关联选择器）
5. **私密保存可供性**：反思仅教师本人可见（感知：隐私锁图标）

**意义闭合：**
曾经模糊的感受，现在变成了清晰的认知。教师实现了专业成长。

**内在动机：**
- 兴趣：反思带来深刻的自我认知
- 精通：越来越擅长反思性实践
- 自主：反思内容完全私密

**故事依赖：**
- 支持：MAS-6（分享研究成果）
- 需要：MAS-1/MAS-3/MAS-4（需要有研究经历）

**超出范围：**
- 公开反思（不同的故事）
- 反思评价（不同的故事）

---

### MAS-6：分享研究智慧

**故事主题：**
在保护隐私的前提下，与教师社区分享研究成果

**核心可供性序列：**

1. **成果撰写可供性**：撰写研究报告（感知：报告编辑器）
2. **匿名化工具可供性**：自动移除敏感信息（感知：匿名化按钮/检查清单）
3. **预览确认可供性**：预览匿名化后的内容（感知：预览视图）
4. **发布可供性**：发布到教师社区（感知：发布按钮）
5. **浏览学习可供性**：浏览其他教师的成果（感知：社区列表）

**意义闭合：**
曾经孤立的研究，现在成为了社区的共同财富。教师贡献了专业智慧。

**内在动机：**
- 兴趣：分享和交流带来归属感
- 精通：从他人经验中学习
- 自主：教师决定是否分享

**故事依赖：**
- 支持：无（这是一个完整的故事）
- 需要：MAS-5（必须先有研究成果）

**超出范围：**
- 实时讨论（不同的故事）
- 成果评分（不同的故事）

---

### MAS-7：系统化学习研究方法

**故事主题：**
通过渐进式课程模块，系统学习教育研究方法

**核心可供性序列：**

1. **阶段识别可供性**：系统识别教师当前阶段（感知：阶段标识）
2. **课程推荐可供性**：推荐适合的课程模块（感知：推荐列表）
3. **学习可供性**：学习课程内容（感知：课程页面）
4. **任务实践可供性**：完成学习任务（感知：任务清单）
5. **进阶可供性**：完成后进入下一阶段（感知：进度指示）

**意义闭合：**
曾经零散的知识，现在形成了系统的研究能力。教师完成了阶段性成长。

**内在动机：**
- 兴趣：看到自己的成长轨迹
- 精通：研究能力逐步提升
- 自主：教师选择学习节奏

**故事依赖：**
- 支持：所有其他 MAS（学习支持实践）
- 需要：无（可以独立开始）

**超出范围：**
- 考试认证（不同的故事）
- 教师培训（不同的故事）

---

## 3. 可供性详细规约

### 3.1 主要可供性（MAS-1 核心）

#### 可供性：AFF-001 快速记录观察

**级别：** 主要
**启用的操作：** 创建教学观察记录

**环境属性：**

| 属性 | 值 | 可被感知者 |
|----------|-------|----------------|
| 视觉线索 | 悬浮按钮（"+"图标）、快捷入口 | 人类教师 |
| 语义标记 | `<button role="button" aria-label="创建观察记录">` | AI 智能体 |
| 交互模式 | 点击/触摸 | 两者 |

**智能体要求：**

| 智能体类型 | 所需能力 |
|------------|----------------------|
| 人类教师 | 视觉、指点设备/触摸屏 |
| AI 智能体 | DOM 访问、点击能力 |

**感知-行动耦合：**

**人类感知：**
- **看到**：醒目的"+"按钮，始终可见
- **执行**：点击按钮，打开记录表单
- **反馈**：表单立即出现，焦点在输入框

**AI 感知：**
- **检测**：`button[aria-label="创建观察记录"]`
- **执行**：`click()` 方法
- **验证**：表单元素出现在 DOM 中

**约束条件：**
- 必须登录（来自 real.md C1）
- 数据仅教师本人可访问（来自 real.md C1）

**依赖关系：**
- **需要**：用户认证
- **启用**：AFF-002（记录内容输入）

---

#### 可供性：AFF-002 记录内容输入

**级别：** 主要
**启用的操作：** 输入观察内容（文字或语音）

**环境属性：**

| 属性 | 值 | 可被感知者 |
|----------|-------|----------------|
| 视觉线索 | 多行文本框、语音输入按钮 | 人类教师 |
| 语义标记 | `<textarea>` + `<button aria-label="语音输入">` | AI 智能体 |
| 交互模式 | 文字输入/语音转文字 | 两者 |

**智能体要求：**

| 智能体类型 | 所需能力 |
|------------|----------------------|
| 人类教师 | 键盘输入/语音输入 |
| AI 智能体 | 文本输入 API |

**感知-行动耦合：**

**人类感知：**
- **看到**：清晰的输入框，带占位符文本
- **执行**：输入文字或点击语音按钮
- **反馈**：文字实时显示，语音转文字后显示

**AI 感知：**
- **检测**：`textarea[name="content"]`
- **执行**：`setValue()` 方法
- **验证**：文本内容已填充

**约束条件：**
- 学生信息必须去标识化（来自 real.md C2）
- 系统提供去标识化提示（来自 real.md C2）

**依赖关系：**
- **需要**：AFF-001（快速记录观察）
- **启用**：AFF-003（去标识化辅助）

---

#### 可供性：AFF-003 学生信息去标识化辅助

**级别：** 主要
**启用的操作：** 检测并提示学生信息去标识化

**环境属性：**

| 属性 | 值 | 可被感知者 |
|----------|-------|----------------|
| 视觉线索 | 警告提示框、辅助工具按钮 | 人类教师 |
| 语义标记 | `<div role="alert">` + 辅助工具 | AI 智能体 |
| 交互模式 | 自动检测 + 手动工具 | 两者 |

**智能体要求：**

| 智能体类型 | 所需能力 |
|------------|----------------------|
| 人类教师 | 阅读提示、使用工具 |
| AI 智能体 | 文本分析、替换能力 |

**感知-行动耦合：**

**人类感知：**
- **看到**：输入时出现提示"请使用代号（如 S001）代替学生真实姓名"
- **执行**：使用辅助工具或手动替换
- **反馈**：敏感信息被标记或替换

**AI 感知：**
- **检测**：文本中的姓名模式
- **执行**：调用去标识化 API
- **验证**：返回处理后的文本

**约束条件：**
- 必须执行去标识化（来自 real.md C2）
- 不得存储学生真实信息（来自 real.md C2）

**依赖关系：**
- **需要**：AFF-002（记录内容输入）
- **启用**：AFF-004（自动保存）

---

#### 可供性：AFF-004 本地优先自动保存

**级别：** 主要
**启用的操作：** 自动保存到本地存储

**环境属性：**

| 属性 | 值 | 可被感知者 |
|----------|-------|----------------|
| 视觉线索 | "已保存"状态指示、时间戳 | 人类教师 |
| 语义标记 | `<span aria-live="polite">已保存</span>` | AI 智能体 |
| 交互模式 | 自动触发（暂停输入时） | 两者 |

**智能体要求：**

| 智能体类型 | 所需能力 |
|------------|----------------------|
| 人类教师 | 无（自动） |
| AI 智能体 | LocalStorage API |

**感知-行动耦合：**

**人类感知：**
- **看到**：保存状态从"保存中..."变为"已保存"
- **执行**：无需操作（自动）
- **反馈**：状态指示 + 时间戳

**AI 感知：**
- **检测**：保存事件触发
- **执行**：写入 LocalStorage
- **验证**：数据已持久化

**约束条件：**
- 本地优先存储（来自 real.md C7）
- 云端同步为可选（来自 real.md C7）

**依赖关系：**
- **需要**：AFF-003（去标识化完成）
- **启用**：MAS-2（从观察到问题）

---

### 3.2 次要可供性（MAS-2 核心）

#### 可供性：AFF-005 AI 辅助问题提炼

**级别：** 次要
**启用的操作：** 从观察记录中提炼研究问题

**环境属性：**

| 属性 | 值 | 可被感知者 |
|----------|-------|----------------|
| 视觉线索 | "AI 辅助"按钮、魔法棒图标 | 人类教师 |
| 语义标记 | `<button data-ai-action="generate-question">` | AI 智能体 |
| 交互模式 | 点击触发 AI 调用 | 两者 |

**智能体要求：**

| 智能体类型 | 所需能力 |
|------------|----------------------|
| 人类教师 | 点击、阅读 AI 建议 |
| AI 智能体 | API 调用能力 |

**感知-行动耦合：**

**人类感知：**
- **看到**："AI 辅助提炼问题"按钮
- **执行**：点击按钮，等待 AI 响应
- **反馈**：显示 AI 建议，明确标注"AI 辅助建议"

**AI 感知：**
- **检测**：`button[data-ai-action="generate-question"]`
- **执行**：POST 到 `/api/ai/generate-question`
- **验证**：返回问题建议列表

**约束条件：**
- AI 建议必须明确标注（来自 real.md C3）
- 教师自主决策是否采纳（来自 real.md C3）

**依赖关系：**
- **需要**：至少一条观察记录
- **启用**：AFF-006（问题编辑）

---


#### 可供性：AFF-006 研究问题编辑与确认

**级别：** 次要
**启用的操作：** 编辑和确认研究问题

**环境属性：**

| 属性 | 值 | 可被感知者 |
|----------|-------|----------------|
| 视觉线索 | 可编辑文本框、确认按钮 | 人类教师 |
| 语义标记 | `<textarea>` + `<button>确认</button>` | AI 智能体 |
| 交互模式 | 编辑 + 确认 | 两者 |

**感知-行动耦合：**

**人类感知：**
- **看到**：AI 建议的问题（可编辑）
- **执行**：修改问题文本，点击确认
- **反馈**：问题保存成功提示

**AI 感知：**
- **检测**：`textarea[name="question"]` + `button[type="submit"]`
- **执行**：修改文本 + 提交表单
- **验证**：问题已保存到数据库

**约束条件：**
- 教师必须审阅 AI 建议（来自 real.md C3）
- 问题归属于教师本人（来自 real.md C1）

**依赖关系：**
- **需要**：AFF-005（AI 提炼）或手动创建
- **启用**：MAS-3（设计研究）

---

### 3.3 次要可供性（MAS-3 核心）

#### 可供性：AFF-007 研究方法模板选择

**级别：** 次要
**启用的操作：** 选择研究方法模板

**环境属性：**

| 属性 | 值 | 可被感知者 |
|----------|-------|----------------|
| 视觉线索 | 模板卡片、方法说明 | 人类教师 |
| 语义标记 | `<div role="listbox">` + 模板项 | AI 智能体 |
| 交互模式 | 选择模板 | 两者 |

**感知-行动耦合：**

**人类感知：**
- **看到**：行动研究、案例研究、观察研究等模板
- **执行**：点击选择模板
- **反馈**：模板内容加载到编辑器

**AI 感知：**
- **检测**：`div[role="option"]`
- **执行**：点击选项
- **验证**：模板内容已加载

**约束条件：**
- 提供渐进式学习路径（来自 real.md C6）
- 模板适合不同阶段教师（来自 real.md C6）

**依赖关系：**
- **需要**：已确认的研究问题
- **启用**：AFF-008（AI 辅助研究框架）

---

#### 可供性：AFF-008 AI 辅助研究框架生成

**级别：** 次要
**启用的操作：** 生成研究设计框架

**环境属性：**

| 属性 | 值 | 可被感知者 |
|----------|-------|----------------|
| 视觉线索 | "AI 辅助设计"按钮 | 人类教师 |
| 语义标记 | `<button data-ai-action="generate-framework">` | AI 智能体 |
| 交互模式 | 点击触发 | 两者 |

**感知-行动耦合：**

**人类感知：**
- **看到**："AI 辅助生成研究框架"按钮
- **执行**：点击按钮
- **反馈**：显示 AI 生成的框架，标注"AI 辅助建议"

**AI 感知：**
- **检测**：`button[data-ai-action="generate-framework"]`
- **执行**：POST 到 `/api/ai/generate-framework`
- **验证**：返回研究框架

**约束条件：**
- AI 建议必须明确标注（来自 real.md C3）
- 教师自主设计方案（来自 real.md C3）

**依赖关系：**
- **需要**：AFF-007（模板选择）
- **启用**：AFF-009（方案编辑）

---

#### 可供性：AFF-009 研究伦理审查指引

**级别：** 主要
**启用的操作：** 提供伦理审查检查清单

**环境属性：**

| 属性 | 值 | 可被感知者 |
|----------|-------|----------------|
| 视觉线索 | 伦理检查清单、警告图标 | 人类教师 |
| 语义标记 | `<div role="checklist">` | AI 智能体 |
| 交互模式 | 勾选确认 | 两者 |

**感知-行动耦合：**

**人类感知：**
- **看到**：伦理审查要点（知情同意、数据保护等）
- **执行**：阅读并勾选确认
- **反馈**：所有项勾选后才能创建项目

**AI 感知：**
- **检测**：`input[type="checkbox"][name="ethics"]`
- **执行**：勾选所有项
- **验证**：表单验证通过

**约束条件：**
- 必须提供伦理指引（来自 real.md C4）
- 涉及学生数据必须审查（来自 real.md C4）

**依赖关系：**
- **需要**：研究方案编辑中
- **启用**：AFF-010（项目创建）

---

### 3.4 次要可供性（MAS-5 核心）

#### 可供性：AFF-010 AI 辅助反思结构化

**级别：** 次要
**启用的操作：** 提供反思写作框架

**环境属性：**

| 属性 | 值 | 可被感知者 |
|----------|-------|----------------|
| 视觉线索 | "AI 辅助反思"按钮 | 人类教师 |
| 语义标记 | `<button data-ai-action="reflection-prompt">` | AI 智能体 |
| 交互模式 | 点击获取提示 | 两者 |

**感知-行动耦合：**

**人类感知：**
- **看到**："AI 辅助反思"按钮
- **执行**：点击获取反思提示
- **反馈**：显示反思框架，标注"AI 辅助建议"

**AI 感知：**
- **检测**：`button[data-ai-action="reflection-prompt"]`
- **执行**：POST 到 `/api/ai/reflection-prompt`
- **验证**：返回反思提示

**约束条件：**
- AI 建议必须明确标注（来自 real.md C3）
- 反思内容仅教师可见（来自 real.md C1）

**依赖关系：**
- **需要**：研究经历（观察/项目）
- **启用**：反思写作

---

### 3.5 次要可供性（MAS-6 核心）

#### 可供性：AFF-011 自动匿名化工具

**级别：** 次要
**启用的操作：** 自动移除敏感信息

**环境属性：**

| 属性 | 值 | 可被感知者 |
|----------|-------|----------------|
| 视觉线索 | "匿名化"按钮、检查清单 | 人类教师 |
| 语义标记 | `<button data-action="anonymize">` | AI 智能体 |
| 交互模式 | 点击触发 | 两者 |

**感知-行动耦合：**

**人类感知：**
- **看到**："自动匿名化"按钮
- **执行**：点击按钮
- **反馈**：敏感信息被标记/移除，显示预览

**AI 感知：**
- **检测**：`button[data-action="anonymize"]`
- **执行**：POST 到 `/api/anonymize`
- **验证**：返回匿名化后的文本

**约束条件：**
- 必须移除学校、地区、学生特征（来自 real.md C5）
- 教师确认后才能发布（来自 real.md C5）

**依赖关系：**
- **需要**：研究成果内容
- **启用**：AFF-012（发布到社区）

---

## 4. 环境约束

### 4.1 物理约束

| 约束 | 对可供性的影响 |
|------------|----------------------|
| 移动端屏幕 | 简化输入界面，优先语音输入 |
| 网络不稳定 | 本地优先存储，离线可用 |
| 教师时间有限 | 快速入口，自动保存 |

### 4.2 结构约束

| 约束 | 对可供性的影响 |
|------------|----------------------|
| 数据归属 | 所有数据必须关联教师 ID |
| 阶段分级 | 课程模块按阶段可见 |
| 隐私隔离 | 教师只能访问自己的数据 |

### 4.3 安全约束（来自 real.md）

| 约束 ID | 可供性限制 |
|---------|----------------------|
| C1 | 教师数据严格隔离，仅本人可访问 |
| C2 | 学生信息必须去标识化，系统不存储真实信息 |
| C3 | AI 生成内容必须明确标注，教师自主决策 |
| C4 | 研究活动必须提供伦理审查指引 |
| C5 | 分享功能必须包含匿名化工具 |
| C6 | 课程内容按阶段分级 |
| C7 | 数据本地优先存储，云端同步可选 |

---

## 5. 感知通道

### 5.1 视觉可供性（人类教师）

| 元素 | 感知到的操作 | 设计模式 |
|---------|-----------------|----------------|
| 悬浮按钮 | 可创建记录 | "+"图标，醒目颜色 |
| 输入框 | 可输入内容 | 边框、占位符文本 |
| AI 按钮 | 可获取 AI 辅助 | 魔法棒图标、"AI 辅助"标签 |
| 警告提示 | 需要注意 | 黄色/红色、警告图标 |
| 保存状态 | 数据已保存 | "已保存"文字、时间戳 |
| 隐私锁 | 内容私密 | 锁图标、"仅自己可见" |

### 5.2 语义可供性（AI 智能体）

| 元素 | 语义标记 | 感知到的操作 |
|---------|----------------|------------------|
| 创建按钮 | `role="button"` + `aria-label` | 可点击创建 |
| 输入框 | `<textarea>` + `name` 属性 | 文本输入点 |
| AI 按钮 | `data-ai-action` 属性 | AI 功能触发点 |
| 警告 | `role="alert"` | 需要处理的警告 |
| 状态指示 | `aria-live="polite"` | 状态变化通知 |

### 5.3 跨模态可供性（两者）

| 可供性 | 人类通道 | AI 通道 | 统一操作 |
|------------|---------------|------------|----------------|
| 创建记录 | 点击按钮 | POST 到 API | 数据创建 |
| 输入内容 | 键盘/语音 | 文本 API | 内容填充 |
| AI 辅助 | 点击 AI 按钮 | 调用 AI API | 获取建议 |
| 保存数据 | 自动触发 | LocalStorage API | 数据持久化 |

---

## 6. 反馈机制

### 6.1 即时反馈（< 100ms）

| 操作 | 人类反馈 | AI 反馈 |
|--------|---------------|-------------|
| 点击按钮 | 按钮状态变化 | DOM 更新事件 |
| 输入文字 | 字符实时显示 | 值变化事件 |
| 勾选选项 | 勾选标记出现 | 状态更新 |

### 6.2 进度反馈（< 1s）

| 操作 | 人类反馈 | AI 反馈 |
|--------|---------------|-------------|
| AI 处理 | "AI 思考中..."加载动画 | 待处理状态 |
| 保存数据 | "保存中..."指示器 | 保存进度事件 |
| 匿名化 | "处理中..."进度条 | 处理状态 |

### 6.3 完成反馈（< 5s）

| 操作 | 人类反馈 | AI 反馈 |
|--------|---------------|-------------|
| 记录创建 | "创建成功"提示 | 响应数据 |
| AI 建议 | 显示建议内容 + "AI 辅助建议"标注 | 建议数据 |
| 发布成果 | "发布成功"确认 | 状态已确认 |

---

## 7. 可供性验收标准

### 7.1 MAS-1 验收标准

| ID | 标准 | 人类测试 | AI 测试 |
|----|------|----------|---------|
| AFF-001-1 | 快速入口可见 | 用户看到"+"按钮 | 元素具有正确的 aria-label |
| AFF-001-2 | 点击可创建 | 用户点击后表单出现 | click() 后表单元素出现 |
| AFF-002-1 | 输入框可用 | 用户可以输入文字 | setValue() 方法有效 |
| AFF-002-2 | 语音输入可用 | 用户可以语音输入 | 语音 API 可调用 |
| AFF-003-1 | 去标识化提示 | 用户看到提示信息 | alert 元素存在 |
| AFF-003-2 | 敏感信息检测 | 输入姓名时出现警告 | 检测 API 返回警告 |
| AFF-004-1 | 自动保存触发 | 暂停输入后自动保存 | 保存事件触发 |
| AFF-004-2 | 本地存储成功 | 数据保存到本地 | LocalStorage 包含数据 |

### 7.2 MAS-2 验收标准

| ID | 标准 | 人类测试 | AI 测试 |
|----|------|----------|---------|
| AFF-005-1 | AI 按钮可见 | 用户看到"AI 辅助"按钮 | 按钮元素存在 |
| AFF-005-2 | AI 建议生成 | 点击后显示问题建议 | API 返回建议列表 |
| AFF-005-3 | AI 标注清晰 | 建议标注"AI 辅助建议" | 标注元素存在 |
| AFF-006-1 | 问题可编辑 | 用户可以修改问题 | textarea 可编辑 |
| AFF-006-2 | 确认可保存 | 点击确认后问题保存 | POST 请求成功 |

### 7.3 MAS-3 验收标准

| ID | 标准 | 人类测试 | AI 测试 |
|----|------|----------|---------|
| AFF-007-1 | 模板可选择 | 用户看到模板列表 | listbox 元素存在 |
| AFF-007-2 | 模板可加载 | 选择后模板内容加载 | 模板数据已填充 |
| AFF-008-1 | AI 框架生成 | 点击后显示研究框架 | API 返回框架数据 |
| AFF-009-1 | 伦理清单显示 | 用户看到伦理检查清单 | checklist 元素存在 |
| AFF-009-2 | 必须勾选确认 | 未勾选时无法创建项目 | 表单验证失败 |

### 7.4 MAS-6 验收标准

| ID | 标准 | 人类测试 | AI 测试 |
|----|------|----------|---------|
| AFF-011-1 | 匿名化工具可用 | 用户看到匿名化按钮 | 按钮元素存在 |
| AFF-011-2 | 敏感信息移除 | 学校名称被移除 | API 返回匿名化文本 |
| AFF-011-3 | 预览可确认 | 用户可以预览结果 | 预览数据正确 |
| AFF-011-4 | 确认后发布 | 确认后才能发布 | 发布 API 需要确认标志 |

---

## 8. 非可供性（明确禁止的操作）

| 禁止操作 | 理由 |
|----------|------|
| 访问他人数据 | 违反隐私约束（C1） |
| 存储学生真实信息 | 违反去标识化约束（C2） |
| AI 自动决策 | 违反教师主体性约束（C3） |
| 跳过伦理审查 | 违反研究伦理约束（C4） |
| 未匿名化直接分享 | 违反隐私保护约束（C5） |
| 强制云端存储 | 违反本地优先约束（C7） |

---

## 9. 技术实现

### 9.1 前端可供性渲染

**技术栈：**
- 框架：Next.js / React
- UI：Tailwind CSS + shadcn/ui
- 语言：TypeScript

**关键实现：**
- 响应式设计（移动端 + 桌面端）
- 离线优先（PWA + LocalStorage）
- 无障碍支持（ARIA 标签）
- AI 标注组件（统一样式）

### 9.2 后端可供性支持

**技术栈：**
- 运行时：Bun / Node.js
- 数据库：PostgreSQL / SQLite
- ORM：Drizzle ORM / Prisma

**关键实现：**
- 数据隔离（Row-Level Security）
- 去标识化服务
- AI 集成（Vercel AI SDK）
- 匿名化服务

### 9.3 AI 集成

**技术栈：**
- AI SDK：Vercel AI SDK
- 模型：Claude / GPT-4 / 国产大模型

**关键实现：**
- 问题提炼 API
- 研究框架生成 API
- 反思提示 API
- 所有 AI 响应统一标注

### 9.4 基础设施要求

**开发环境：**
- 设备：Apple Silicon Mac
- Node.js：Bun
- Python：uv
- Git：cnb.cool

**部署环境：**
- 托管：Vercel / 自托管
- 数据库：PostgreSQL / SQLite
- 存储：本地优先 + 云端同步（可选）

---

## 10. 附录

### 10.1 可供性理论参考

本文档基于 James J. Gibson 的可供性理论，强调环境与智能体之间的关系性。在 AI 时代，可供性不仅对人类可感知，也对 AI 智能体可感知。

**核心概念：**
- 可供性是环境属性与智能体能力的关系
- 可供性是客观存在的，但需要被感知
- 良好的可供性设计让行动可能性不言自明

### 10.2 术语表

| 术语 | 定义 |
|------|------|
| 可供性 | 环境提供给智能体的行动可能性 |
| MAS | 最小可供故事，能够产生意义的最小连贯行动可能性叙事 |
| 感知-行动耦合 | 智能体感知可供性并执行行动的过程 |
| 去标识化 | 移除可识别个人身份的信息 |
| 匿名化 | 移除可能暴露身份的细节信息 |

### 10.3 文档版本历史

| 版本 | 日期 | 变更说明 |
|------|------|----------|
| 1.0.0 | 2025-12-17 | 初始版本，基于 real.md 和 cog.md 生成 |

---

**文档维护者：** 路屿
**最后更新：** 2025-12-17
**文档类型：** 产品需求文档（可供性驱动）
